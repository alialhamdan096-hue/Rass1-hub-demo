:root{--primary: #561C2C;--primary-light: #7a2840;--accent: #8DC63F;--accent-dark: #6fa329;--text-dark: #333;--gray: #666;--gray-light: #f5f5f5;--white: #fff;--success: #10b981;--warning: #f59e0b;--danger: #ef4444;--info: #3b82f6;--order-bg: #eff6ff;--shadow-sm: 0 2px 4px rgba(0,0,0,.05);--shadow-md: 0 4px 12px rgba(0,0,0,.08);--shadow-lg: 0 8px 25px rgba(0,0,0,.1);--radius-sm: 8px;--radius-md: 12px;--radius-lg: 16px;--radius-full: 9999px;--transition: .3s ease}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(180deg,#f9f6f2,#e8dccf);color:var(--text-dark);min-height:100vh;padding:15px;line-height:1.6}.toast-container{position:fixed;top:20px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:10px}.toast{padding:14px 20px;border-radius:var(--radius-md);color:#fff;font-weight:500;box-shadow:var(--shadow-lg);animation:slideIn .3s ease;display:flex;align-items:center;gap:10px;min-width:280px}.toast.hiding{animation:slideOut .3s ease forwards}.toast-success{background:var(--success)}.toast-error{background:var(--danger)}.toast-warning{background:var(--warning)}.toast-info{background:var(--info)}@keyframes slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes slideOut{0%{transform:translate(0);opacity:1}to{transform:translate(100%);opacity:0}}.loading-overlay{position:fixed;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:15px;z-index:9999;opacity:0;visibility:hidden;transition:var(--transition)}.loading-overlay.active{opacity:1;visibility:visible}.spinner{width:50px;height:50px;border:4px solid var(--gray-light);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}.loading-text{color:var(--primary);font-weight:600}@keyframes spin{to{transform:rotate(360deg)}}.modal-overlay{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:9998;opacity:0;visibility:hidden;transition:var(--transition)}.modal-overlay.active{opacity:1;visibility:visible}.modal{background:#fff;border-radius:var(--radius-lg);padding:25px;max-width:400px;width:90%;text-align:center;transform:scale(.9);transition:var(--transition)}.modal-overlay.active .modal{transform:scale(1)}.modal-icon{font-size:48px;margin-bottom:15px}.modal-title{font-size:18px;font-weight:700;color:var(--text-dark);margin-bottom:10px}.modal-message{color:var(--gray);margin-bottom:20px;line-height:1.6}.modal-actions{display:flex;gap:10px;justify-content:center}.modal-actions button{padding:10px 24px;border-radius:var(--radius-sm);font-weight:700;cursor:pointer;transition:var(--transition);border:none;flex:1}.modal-cancel{background:#e5e5e5;color:var(--text-dark)}.modal-cancel:hover{background:#d5d5d5}.modal-confirm{background:var(--primary);color:#fff}.modal-confirm:hover{background:var(--primary-light)}.modal-confirm.danger{background:var(--danger)}.modal-confirm.danger:hover{background:#dc2626}.modal-confirm.success{background:var(--success)}.modal-confirm.success:hover{background:#059669}.container{max-width:1200px;margin:0 auto}.header-container{text-align:center;margin-bottom:20px}.logo-img{height:80px;margin-bottom:10px;filter:drop-shadow(0 2px 4px rgba(86,28,44,.2))}h1{color:var(--primary);margin-bottom:8px;font-weight:700;font-size:22px}.tabs{display:flex;justify-content:center;gap:8px;margin-bottom:20px;flex-wrap:wrap}.tab{background:#ffffffb3;border:none;padding:10px 20px;border-radius:var(--radius-full);cursor:pointer;font-weight:700;color:var(--gray);transition:var(--transition);box-shadow:var(--shadow-sm);position:relative;font-size:13px}.tab.active{background:var(--primary);color:#fff;box-shadow:0 4px 10px #561c2c4d}.tab:hover:not(.active){background:#fff;transform:translateY(-2px)}.tab-badge{position:absolute;top:-5px;right:-5px;background:var(--danger);color:#fff;font-size:10px;font-weight:700;padding:2px 6px;border-radius:var(--radius-full);min-width:18px}.page{display:none;animation:fadeIn .3s ease}.page.active{display:block}@keyframes fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}.grid{display:grid;grid-template-columns:350px 1fr;gap:20px}@media(max-width:900px){.grid{grid-template-columns:1fr}}.card{background:var(--white);border-radius:var(--radius-lg);padding:20px;margin-bottom:15px;box-shadow:var(--shadow-lg)}.card-title{color:var(--primary);margin-bottom:15px;font-size:16px;font-weight:600}.type-selector{display:flex;gap:8px;margin-bottom:15px}.type-btn{flex:1;padding:12px;border:2px solid #e5e5e5;border-radius:var(--radius-md);background:#fff;cursor:pointer;transition:var(--transition);text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.type-btn:hover{border-color:var(--primary)}.type-btn.active{border-color:var(--primary);background:#561c2c0d}.type-btn.active.order{border-color:var(--info);background:var(--order-bg)}.type-btn-icon{font-size:20px;margin-bottom:2px}.type-btn-label{font-weight:600;color:var(--text-dark);font-size:12px}.type-badge{font-size:14px;margin-right:5px}tr.order-row{background:var(--order-bg)}tr.order-row:hover{background:#e0edff}.form-group{margin-bottom:12px}label{display:block;margin-bottom:4px;color:#555;font-size:13px;font-weight:600}label .required{color:var(--danger)}input,select{width:100%;padding:12px;background:#fafafa;border:2px solid #e5e5e5;border-radius:var(--radius-sm);color:#333;font-size:16px;transition:var(--transition)}input:focus,select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #561c2c1a;background:#fff}input.error{border-color:var(--danger);background:#fef2f2}.error-message{color:var(--danger);font-size:11px;margin-top:3px;display:none}.error-message.show{display:block}.row{display:flex;flex-direction:column;gap:10px}.checkbox-wrapper{display:flex;align-items:center;gap:8px;margin:10px 0;font-size:14px;font-weight:600;cursor:pointer}.checkbox-wrapper input{width:auto}.btn{padding:12px 20px;border:none;border-radius:var(--radius-sm);cursor:pointer;font-size:14px;font-weight:700;width:100%;margin-top:8px;transition:var(--transition);display:inline-flex;align-items:center;justify-content:center;gap:8px}.btn-primary{background:var(--primary);color:#fff}.btn-primary:hover:not(:disabled){background:var(--primary-light);transform:translateY(-2px);box-shadow:var(--shadow-md)}.btn-secondary{background:#6c757d;color:#fff}.btn-secondary:hover:not(:disabled){background:#5a6268}.btn-success{background:var(--success);color:#fff}.btn-success:hover:not(:disabled){background:#059669}.btn-info{background:var(--info);color:#fff}.btn-info:hover:not(:disabled){background:#2563eb}.btn-danger{background:var(--danger);color:#fff}.btn-danger:hover:not(:disabled){background:#dc2626}.btn:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.btn-sm{padding:8px 16px;width:auto;margin:0;font-size:12px}.filters-row{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap}.filters-row input{flex:1;min-width:200px}.filters-row select{width:auto;min-width:130px}.table-container{overflow-x:auto}table{width:100%;border-collapse:separate;border-spacing:0;margin-top:10px}th{text-align:left;padding:12px 10px;background:#f9f9f9;color:var(--gray);font-size:11px;text-transform:uppercase;border-bottom:2px solid #eee;white-space:nowrap}td{padding:12px 10px;border-bottom:1px solid #eee;vertical-align:middle}tr:hover{background:#fcfcfc}.name{font-weight:700;color:var(--primary)}.phone{color:#888;font-size:12px;margin-top:2px;display:flex;align-items:center;gap:5px}.phone-copy{cursor:pointer;padding:2px 5px;border-radius:4px;transition:var(--transition)}.phone-copy:hover{background:#e5e5e5}.med{color:var(--primary);font-weight:500}.date-added{color:#888;font-size:12px}.branch-info{color:var(--info);font-size:11px;font-weight:600}.badge{padding:5px 12px;border-radius:var(--radius-full);font-size:10px;font-weight:700;letter-spacing:.5px;white-space:nowrap}.badge-ok{background:#8dc63f26;color:var(--accent-dark)}.badge-warn{background:#f59e0b26;color:#d97706}.badge-danger{background:#ef444426;color:#dc2626}.badge-info{background:#3b82f626;color:var(--info)}.badge-delivered{background:#8dc63f26;color:var(--accent-dark)}.badge-waiting{background:#f59e0b26;color:#d97706}.badge-client{background:#ef444426;color:#dc2626;font-size:9px;padding:3px 8px}.actions{display:flex;gap:5px;flex-wrap:wrap}.actions button{width:32px;height:32px;border:none;border-radius:8px;cursor:pointer;font-size:14px;transition:var(--transition);display:flex;align-items:center;justify-content:center}.wa{background:#25d366;color:#fff}.wa svg{width:18px;height:18px;fill:#fff}.edit{background:#561c2c1a;color:var(--primary)}.del{background:#ef44441a;color:#ef4444}.email-btn,.arrived{background:#3b82f626;color:var(--info)}.done{background:#8dc63f26;color:var(--accent-dark)}.actions button:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm)}.empty{text-align:center;padding:40px;color:#aaa;font-style:italic}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin-bottom:20px}.stat{background:#fff;padding:15px;border-radius:var(--radius-md);box-shadow:var(--shadow-md);position:relative;overflow:hidden}.stat:after{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--gray)}.stat-num{font-size:24px;font-weight:800;color:var(--text-dark)}.stat-label{color:#888;font-size:10px;text-transform:uppercase;letter-spacing:.5px;margin-top:3px}.stat.total:after{background:var(--primary)}.stat.w:after{background:#f59e0b}.stat.d:after{background:#ef4444}.stat.s:after{background:var(--accent)}.stat.orders:after{background:var(--info)}.sync{text-align:center;padding:8px 14px;font-size:12px;margin-bottom:15px;border-radius:var(--radius-sm);background:#ffffffe6;display:flex;align-items:center;justify-content:center;gap:6px}.sync-ok{color:var(--accent-dark);border:1px solid rgba(141,198,63,.3)}.sync-err{color:#ef4444;border:1px solid rgba(239,68,68,.3)}.alert-banner{background:linear-gradient(135deg,#fef3c7,#fde68a);border:1px solid #f59e0b;border-radius:var(--radius-md);padding:12px 15px;margin-bottom:15px;display:flex;align-items:center;gap:10px;animation:fadeIn .3s ease}.alert-banner.hidden{display:none}.alert-banner-icon{font-size:20px}.alert-banner-text{flex:1;font-weight:500;color:#92400e;font-size:13px}.alert-banner-close{background:none;border:none;font-size:18px;cursor:pointer;color:#92400e;padding:5px}.pagination{display:flex;justify-content:center;align-items:center;gap:6px;margin-top:15px;flex-wrap:wrap}.pagination button{padding:6px 12px;border:1px solid #ddd;background:#fff;border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition);font-weight:500;font-size:12px}.pagination button:hover:not(:disabled):not(.active){border-color:var(--primary);color:var(--primary)}.pagination button.active{background:var(--primary);color:#fff;border-color:var(--primary)}.pagination button:disabled{opacity:.5;cursor:not-allowed}.pagination-info{color:var(--gray);font-size:11px;margin-left:8px}.track-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}.track-card{background:#fff;border:2px solid #eee;border-radius:var(--radius-md);padding:15px;transition:var(--transition);box-shadow:var(--shadow-sm)}.track-card:hover{border-color:var(--primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.track-card.converted{border-color:var(--accent);background:#8dc63f0d}.track-card .name{font-size:15px;margin-bottom:4px;color:#333}.track-card .med{margin:8px 0;color:var(--primary);font-size:13px}.track-card .info{font-size:11px;color:#888;margin-bottom:12px;line-height:1.4}.track-card .history-badge{font-size:10px;color:var(--accent-dark);background:#8dc63f1a;padding:3px 8px;border-radius:10px;margin-bottom:8px;display:inline-block}.track-btn{width:100%;padding:10px;border:none;border-radius:var(--radius-sm);cursor:pointer;font-weight:700;font-size:13px;background:#8dc63f26;color:var(--accent-dark);transition:var(--transition);margin-bottom:6px}.track-btn:hover,.track-btn.done{background:var(--accent);color:#fff}.track-btn.renew{background:#561c2c1a;color:var(--primary)}.track-btn.renew:hover{background:var(--primary);color:#fff}.report-tabs{display:flex;gap:5px;margin-bottom:15px;border-bottom:1px solid #eee}.report-tab{padding:8px 16px;border:none;background:none;cursor:pointer;font-weight:600;color:var(--gray);border-bottom:3px solid transparent}.report-tab.active{color:var(--primary);border-bottom-color:var(--primary)}.report-section{display:none}.report-section.active{display:block}.report-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:20px}.report-card{background:var(--white);border-radius:var(--radius-md);padding:20px;text-align:center;box-shadow:var(--shadow-lg)}.report-value{font-size:36px;font-weight:700;color:var(--primary)}.report-label{font-size:12px;color:#888;margin-top:4px}.progress{height:8px;background:#eee;border-radius:6px;margin-top:12px;overflow:hidden}.progress-bar{height:100%;border-radius:6px;transition:width .5s ease}.header-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;flex-wrap:wrap;gap:10px}.order-item{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:#f9f9f9;border-radius:var(--radius-sm);margin-bottom:8px;gap:10px}.order-item-info{flex:1}.order-item-med{font-weight:600;color:var(--primary);font-size:13px}.order-item-details{font-size:11px;color:var(--gray);margin-top:2px}.order-item-branch{font-size:11px;color:var(--info);font-weight:500}.order-item-del{background:none;border:none;color:var(--danger);cursor:pointer;font-size:16px;padding:5px}.send-section{margin-top:20px;padding-top:15px;border-top:2px dashed #e5e5e5}.send-group{background:#f0f7ff;border:1px solid #bfdbfe;border-radius:var(--radius-md);padding:15px;margin-bottom:12px}.send-group-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.send-group-title{font-weight:700;color:var(--info);font-size:14px}.send-group-count{font-size:11px;color:var(--gray);background:#fff;padding:2px 8px;border-radius:10px}.send-group-items{font-size:12px;color:var(--text-dark);line-height:1.6}.send-group-item{padding:3px 0}.send-group-item.client{color:var(--danger)}.history-modal{max-width:500px;max-height:85vh;display:flex;flex-direction:column;padding:0}.history-header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;border-bottom:1px solid #eee;background:linear-gradient(135deg,var(--primary) 0%,#5b21b6 100%);color:#fff;border-radius:var(--radius-lg) var(--radius-lg) 0 0}.history-title{font-size:18px;font-weight:700}.history-close{background:#fff3;border:none;color:#fff;width:32px;height:32px;border-radius:50%;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.history-close:hover{background:#ffffff4d}.history-patient-info{padding:15px 20px;background:#f8f9fa;border-bottom:1px solid #eee}.history-patient-name{font-size:16px;font-weight:700;color:var(--text-dark)}.history-patient-phone{font-size:13px;color:var(--gray);margin-top:4px;direction:ltr;text-align:right}.history-patient-med{font-size:14px;color:var(--primary);margin-top:8px;font-weight:500}.history-content{padding:15px 20px;overflow-y:auto;flex:1}.history-section{margin-bottom:20px}.history-section-title{font-size:14px;font-weight:700;color:var(--text-dark);margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--primary)}.history-item{background:#f8f9fa;border-radius:var(--radius-md);padding:12px 15px;margin-bottom:10px;position:relative}.history-item.current{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1px solid #86efac}.history-cycle-num{position:absolute;top:10px;left:10px;background:var(--primary);color:#fff;font-size:10px;padding:2px 8px;border-radius:10px;font-weight:700}.history-item-row{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px dashed #e5e5e5}.history-item-row:last-child{border-bottom:none}.history-label{font-size:12px;color:var(--gray)}.history-value{font-size:13px;color:var(--text-dark);font-weight:500;direction:ltr}.history-empty{text-align:center;color:var(--gray);padding:30px;font-size:14px}.history-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;padding:15px 20px;background:#f8f9fa;border-top:1px solid #eee;border-radius:0 0 var(--radius-lg) var(--radius-lg)}.history-stat{text-align:center}.history-stat-num{font-size:20px;font-weight:700;color:var(--primary)}.history-stat-label{font-size:10px;color:var(--gray);margin-top:2px}.actions .history-btn{background:linear-gradient(135deg,#818cf8,#6366f1);color:#fff}.actions .history-btn:hover{transform:scale(1.1)}.actions .print-btn{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.actions .print-btn:hover{transform:scale(1.1)}.label-modal{max-width:350px;padding:0}.label-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border-radius:var(--radius-lg) var(--radius-lg) 0 0}.label-title{font-size:16px;font-weight:700}.label-close{background:#fff3;border:none;color:#fff;width:28px;height:28px;border-radius:50%;font-size:18px;cursor:pointer}.label-preview{padding:16px;background:#f8f9fa;direction:rtl}.label-card{background:#fff;border:2px solid #333;border-radius:8px;padding:12px;max-width:280px;margin:0 auto}.label-pharmacy{text-align:center;padding-bottom:8px;border-bottom:2px dashed #333;margin-bottom:8px}.label-pharmacy-name{font-size:16px;font-weight:700;color:#1a1a1a}.label-pharmacy-branch{font-size:11px;color:#666}.label-type{text-align:center;padding:4px 12px;border-radius:12px;font-size:11px;margin:8px 0}.label-type.refill{background:#dcfce7;color:#166534}.label-type.order{background:#dbeafe;color:#1e40af}.label-info{margin:8px 0}.label-row{display:flex;justify-content:space-between;padding:5px 0;font-size:12px;border-bottom:1px dotted #ddd}.label-row:last-child{border-bottom:none}.label-key{color:#666}.label-value{font-weight:600;color:#1a1a1a}.label-value.ltr{direction:ltr}.label-med{background:#f3f4f6;padding:10px;border-radius:6px;margin:10px 0;text-align:center}.label-med-title{font-size:10px;color:#666;margin-bottom:4px}.label-med-name{font-size:15px;font-weight:700;color:#7c3aed}.label-notes{background:#fef3c7;padding:6px;border-radius:4px;font-size:11px;text-align:center;margin:8px 0}.label-footer{display:flex;justify-content:space-between;padding-top:8px;border-top:2px dashed #333;margin-top:8px;font-size:10px;color:#888}.label-actions{display:flex;gap:10px;padding:12px 16px;border-top:1px solid #eee;justify-content:flex-end}@media(max-width:600px){body{padding:10px}.header-container h1{font-size:18px}.logo-img{height:60px}.tabs{gap:5px}.tab{padding:8px 12px;font-size:11px}.card{padding:15px}.stats{grid-template-columns:1fr 1fr;gap:8px}.stat{padding:12px}.stat-num{font-size:20px}.stat-label{font-size:9px}table{font-size:11px}th,td{padding:8px 6px}.actions{gap:3px}.actions button{width:28px;height:28px;font-size:12px}.badge{padding:3px 8px;font-size:9px}.report-grid{grid-template-columns:1fr 1fr}.report-value{font-size:28px}.track-grid{grid-template-columns:1fr}.btn{padding:10px 15px}.header-row{flex-direction:column;align-items:stretch}input,select{padding:10px;font-size:16px}.row,.filters-row{flex-direction:column}.filters-row select{width:100%}.toast{min-width:auto;width:calc(100vw - 40px)}.grid{grid-template-columns:1fr}}@media(min-width:768px){.row{flex-direction:row;gap:10px}.row .form-group{flex:1}}@media print{body{background:#fff}.tabs,.sync,.header-row button,.actions,.pagination,.filters-row select,.alert-banner,.type-selector{display:none!important}.card{box-shadow:none;border:1px solid #ddd}}
